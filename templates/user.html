<!DOCTYPE html>
<html lang="en">
<head>
	<title>Log In </title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="author" content="Webestica.com">
	<meta name="description" content="Eduport- LMS, Education and Course Theme">


	<!-- Google Font -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap">

	<!-- Plugins CSS -->
	<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='vendor/font-awesome/css/all.min.css')}}">
	<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='vendor/bootstrap-icons/bootstrap-icons.css')}}">

	<!-- Theme CSS -->
	<link id="style-switch" rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/style.css')}}">
  <style>
	#signupbtn,#signinbtn{
		color: rgb(2, 2, 196);
		cursor: pointer;
	}
	#signup-form{
		display: none;
	}

  </style>
</head>

<body>


<main>
	<section class="p-0 d-flex align-items-center position-relative overflow-hidden">
	
		<div class="container-fluid">
			<div class="row">
				<div class="col-12 col-lg-6 d-md-flex align-items-center justify-content-center bg-primary bg-opacity-10 vh-lg-100">
					<div class="p-1 p-lg-5">
						<div class="text-center">
							<h2 class="fw-bold"> <span class="mb- fs-1">ðŸ‘‹</span>Welcome to {{title}} </h2>
							<p class="mb-0 h6 fw-light">Let's learn something new today!</p>
						</div>
						<img src="{{url_for('static',filename='images/element/02.svg')}}" class="mt-5" alt="">
					</div>
				</div>

				<!-- Right --> 
				<div class="col-12 col-lg-6 m-auto">
					<div class="row my-5"  >
						<div class="col-sm-10 col-xl-8 m-auto"  >

							<form class="mt-3" method="post" action="/login" id="signin-form">
								
								<h1 class="fs-2 mb-4">Log In </h1>
								<div class="mb-4">
									<label for="exampleInputEmail1" class="form-label">Email address *</label>
									<div class="input-group input-group-lg">
										<span class="input-group-text bg-light rounded-start border-0 text-secondary px-3"><i class="bi bi-envelope-fill"></i></span>
										<input type="email" class="form-control border-0 bg-light rounded-end ps-1" placeholder="E-mail" id="InputEmail1" name="email" required>
									</div>
								</div>
								<div class="mb-4">
									<label for="inputPassword5" class="form-label">Password *</label>
									<div class="input-group input-group-lg">
										<span class="input-group-text bg-light rounded-start border-0 text-secondary px-3"><i class="fas fa-lock"></i></span>
										<input type="password" class="form-control border-0 bg-light rounded-end ps-1" placeholder="password" id="inputPassword5" name="password" required>
									</div>
								
								</div>
							
								<div class="align-items-center mt-0">
									<div class="d-grid">
										<button class="btn btn-primary mb-0" type="submit">Log In</button>
									</div>
								</div>
								<div class="row">
									<div class="position-relative my-4">
										<hr>
										<p class="small position-absolute top-50 start-50 translate-middle bg-body px-5">Or</p>
									</div>
	
									
								</div>
								<div class="mt-2 text-center">
									<span>Don't have an account? </span> <span id="signupbtn">Signup here</span>
								</div>
							</form>
							<form class="mt-3" method="post" action="/register" id="signup-form" target="_self">
								<h1 class="fs-2">Create Account</h1>
								<div class="mb-4">
									<label for="exampleInputEmail1" class="form-label">Name *</label>
									<div class="input-group input-group-lg">
										<span class="input-group-text bg-light rounded-start border-0 text-secondary px-3"><i class="bi bi-person-fill"></i></span>
										<input type="text" class="form-control border-0 bg-light rounded-end ps-1" placeholder="Name" id="name" name="name" required>
									</div>
								</div>
								<div class="mb-4">
									<label for="exampleInputEmail1" class="form-label">Age *</label>
									<div class="input-group input-group-lg">
										<span class="input-group-text bg-light rounded-start border-0 text-secondary px-3"><i class="bi bi-calendar-fill"></i></span>
										<input type="number" class="form-control border-0 bg-light rounded-end ps-1" placeholder="Age" id="nameinput" name="age" required>
									</div>
								</div>
								<div class="mb-4">
									<label for="inputPassword5" class="form-label">Email Address *</label>
									<div class="input-group input-group-lg">
										<span class="input-group-text bg-light rounded-start border-0 text-secondary px-3"><i class="fas fa-lock"></i></span>
										<input type="email" class="form-control border-0 bg-light rounded-end ps-1" placeholder="E-mail" id="" name="email" required>

									</div>
								</div>
								<div class="mb-4">
									<label for="inputPassword6" class="form-label">Confirm Password *</label>
									<div class="input-group input-group-lg">
										<span class="input-group-text bg-light rounded-start border-0 text-secondary px-3"><i class="fas fa-lock"></i></span>
										<input type="password" class="form-control border-0 bg-light rounded-end ps-1" placeholder="*********" id="inputPassword" name="password" required>
									</div>
								</div>
								<div class="mb-4">
								
								</div>
								<div class="align-items-center mt-0">
									<div class="d-grid">
										<button class="btn btn-primary mb-0" type="submit">Sign Up</button>
									</div>
								</div>
								<div class="row">
									<!-- Divider with text -->
									<div class="position-relative my-4">
										<hr>
										<p class="small position-absolute top-50 start-50 translate-middle bg-body px-5">Or</p>
									</div>
								</div>
								<div class="mt-2 text-center">
									<span>Already have an account?</span> <span id="signinbtn">Log In</span>
								</div>
							</form>

						</div>
					</div> 
				</div>
			</div> 
		</div>
	</section>
</main>



<div class="back-top"><i class="bi bi-arrow-up-short position-absolute top-50 start-50 translate-middle"></i></div>

<script src="{{url_for('static',filename='vendor/bootstrap/dist/js/bootstrap.bundle.min.js')}}"></script>


<script>
	const signupbtn=document.querySelector("#signupbtn")
	const signinbtn=document.querySelector("#signinbtn")
	const signin_form=document.querySelector("#signin-form")
	const signup_form=document.querySelector("#signup-form")
	signupbtn.addEventListener('click',()=>{
        signin_form.style.display='none'
		signup_form.style.display='block'
		document.title='Sign Up'
	})
	signinbtn.addEventListener('click',()=>{
		 signin_form.style.display='block'
		signup_form.style.display='none'
	})
	document.querySelector("#signup-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const formdata = new FormData(e.target);
    const data = {
        name: formdata.get("name"),
        age: formdata.get("age"),
        email: formdata.get('email'),
        password: formdata.get('password')
    };
    fetch('/auth/register', {
        method: "POST",
        headers: {
            'Content-Type': "application/json"
        },
		
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {	
		if(result.message){
			alert(result.message);
			window.location.href='/'
		}
		else{
			alert(result.existsmessage);
			e.target.reset()
		}
		
    })
    .catch(err => {
        console.log("Register", err);
    });
});
document.querySelector("#signin-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const formdata = new FormData(e.target);
    const data = {
        email: formdata.get('email'),
        password: formdata.get('password')
    };
    fetch('/auth/login', {
        method: "POST",
        headers: {
            'Content-Type': "application/json"
        },

        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {	
		if(result.message){
			window.location.href="/home"
		}
		else{
			e.target.reset()
			alert("Please Enter Correct details !")
		}
    })
    .catch(err => {
        console.log("login", err);
    });
});


</script>
</body>
</html>